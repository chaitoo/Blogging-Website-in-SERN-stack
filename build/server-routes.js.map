{"version":3,"sources":["../src/server-routes.js"],"names":["serverApp","set","join","__dirname","use","static","get","req","res","content","render","title","fetch","then","resp","json","data","festGridContainer","catch","e","console","log","module","exports"],"mappings":";;AAAA;;;;AACA;;;;AACA;;AACA;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;;;AAGA,IAAIA,YAAY,wBAAhB;;AAEAA,UAAUC,GAAV,CAAc,aAAd,EAA6B,KAA7B;AACAD,UAAUC,GAAV,CAAc,OAAd,EAAuB,eAAKC,IAAL,CAAUC,SAAV,EAAqB,OAArB,CAAvB;;AAEAH,UAAUI,GAAV,CAAc,kBAAQC,MAAR,CAAe,eAAKH,IAAL,CAAUC,SAAV,EAAqB,QAArB,CAAf,CAAd;;AAKAH,UAAUM,GAAV,CAAc,YAAd,EAA4B,UAACC,GAAD,EAAMC,GAAN,EAAc;AACxC,MAAMC,UAAU,4BACd,2DADc,CAAhB;AAGAD,MAAIE,MAAJ,CAAW,kBAAX,EAA+B,EAACC,OAAO,qBAAR,EAA+BF,gBAA/B,EAA/B;AACD,CALD;;AAOAT,UAAUM,GAAV,CAAc,GAAd,EAAmB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC7BI,QAAM,iCAAN,EACGC,IADH,CACQ;AAAA,WAAQC,KAAKC,IAAL,EAAR;AAAA,GADR,EAEGF,IAFH,CAEQ,UAAUG,IAAV,EAAgB;AAClB,QAAMC,oBAAoB,4BACxB,iEAAuB,OAASD,IAAhC,GADwB,CAA1B;AAGAR,QAAIE,MAAJ,CAAW,OAAX,EAAoB,EAACC,OAAO,WAAR,EAAqBM,oCAArB,EAApB;AAEH,GARH,EASGC,KATH,CASS,UAASC,CAAT,EAAY;AACjBC,YAAQC,GAAR,CAAY,qBAAmBF,CAA/B;AACD,GAXH;AAYH,CAbD;;AAkBAG,OAAOC,OAAP,GAAiBvB,SAAjB","file":"server-routes.js","sourcesContent":["import express from 'express';\nimport path from 'path';\nimport { renderToString } from 'react-dom/server';\nimport { StaticRouter } from 'react-router';\nimport React from 'react';\n\nimport ClientRoutes from './client-routes';\nimport FestivalGridContainer from './react/templates/festivalGrid-container';\nimport FestivalListPage from './react/templates/festival-list.js'\n\n\nvar serverApp = express();\n\nserverApp.set('view engine', 'ejs');\nserverApp.set('views', path.join(__dirname, 'views'));\n\nserverApp.use(express.static(path.join(__dirname, 'static')));\n\n\n\n\nserverApp.get('/festivals', (req, res) => {\n  const content = renderToString(\n    <FestivalListPage />\n  );\n  res.render('festival-listing', {title: 'Musefests-Festivals', content });\n})\n\nserverApp.get('/', (req, res) => {\n    fetch('http://localhost:2525/api/fests')\n      .then(resp => resp.json())\n      .then(function (data) {\n          const festGridContainer = renderToString(\n            <FestivalGridContainer fests = {data} />\n          );\n          res.render('index', {title: 'Musefests', festGridContainer });\n\n      })\n      .catch(function(e) {\n        console.log(\"err api fetching\"+e);\n      });\n});\n\n\n\n\nmodule.exports = serverApp;\n"]}